<%- include("./partials/header.ejs") %>

<body>

    <%- include("./partials/navbar.ejs") %>

<div class="content">
    <table class="table">
        <thead class="thead-dark">
            <tr id="header">

            </tr>
        </thead>
        <tbody id="rows">
        </tbody>
    </table>
</div>

</body>

<%- include("./partials/footer.ejs") %>

<script>
    axios.get("http://localhost:45789/games").then(response => {
        var games = response.data
        var header = document.getElementById("header")
        var rows = document.getElementById("rows")

        var keys = Object.keys(games[0]);
        keys.forEach(key => {
            var col = document.createElement("th")
            col.innerHTML = key
            header.appendChild(col)
        })
        games.forEach(game => {
            var row = document.createElement("tr")
            var values = Object.keys(game)

            values.forEach(value => {
                var cell = document.createElement("td")
                cell.innerHTML = game[value]
                row.appendChild(cell)
            })
            rows.appendChild(row)
        })

    }).catch(error => {
        console.log(error)
    })
</script>

</html>