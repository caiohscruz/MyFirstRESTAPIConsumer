<%- include("./partials/header.ejs") %>

<body>

    <%- include("./partials/navbar.ejs") %>
    <div class="content">
        <div class="card">
            <div class="card-header">
                <h3>Creating a game</h3>
            </div>
            <div class="card-body">
                <form>
                    <label for="title">Title</label>
                    <input type="text" id="title" class="form-control" name="title" placeholder="Insert the title"
                        required>
                    <br>
                    <label for="year">Year</label>
                    <input type="number" id="year" class="form-control" name="year" placeholder="Insert the year"
                        required>
                    <br>
                    <label for="price">Price</label>
                    <input type="number" id="price" class="form-control" name="price" placeholder="Insert the price"
                        required>
                    <br>
                    <button class="btn btn-success" type="button" onclick="CreateGame()">Create</button>
                </form>
            </div>
        </div>
    </div>

    <input type="hidden" id="restAPI" value="<%= restAPI %>">

</body>

<%- include("./partials/footer.ejs") %>

<script>
    const restAPI = document.getElementById("restAPI").value

    function CreateGame() {
        var titleInput = document.getElementById("title")
        var yearInput = document.getElementById("year")
        var priceInput = document.getElementById("price")

        var game = {
            title: titleInput.value,
            year: yearInput.value,
            price: priceInput.value
        }

        axios.post(`${restAPI}/game`, game).then(response => {
           alert(response.status)
        }).catch(err => {
            console.log(err)
        })
    }
</script>

</html>